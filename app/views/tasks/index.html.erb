<% @page_title = "Tasks List" %>

<div class="tasks list">
  <h2>Assigned Tasks</h2>
  
  <%= link_to("Add New Task", {:controller => 'tasks', :action => 'new', :id => @member.id }) %>
<%= link_to("Back to Member", {:controller => 'members', :action => 'show', :id=> @member.id}) %>

  <div><%= pluralize(@tasks.size, 'task') %> found</div>
  
  <div class="spreadsheet">
    
    <div class="spread-head">
      <!-- spreadsheet title -->
      <h1>Assigned Tasks</h1>
      
      <!-- tabs, if needed -->
      <div class="tab active">link1</div>
      <div class="tab">link2</div>
      
      <!-- filter field -->
      <input value="filter..." />
    </div>
    
    <table>
      <thead>
          <tr>
            <th>Descritpion</th>
              <th>Status</th>
              <th>Deadline</th>
              <th>Requested Deadline</th>
              <th>Comment</th>
              <th>Excuse</th>
          </tr>
      </thead>
      
      <tbody>
        <% @tasks.each do |task| %>
        <tr>
          <%= form_for task, :url => {:controller => 'tasks', :action => 'extend_deadline', :task_id => task.id, :member_id => @member.id} do |f| %>
          <td>
            <p class="cell-data"><%= task.description %></p>
            <div class="cell-edit"></div>
          </td>
          <td>
            <p class="cell-data"><%= task.status %></p>
            <div class="cell-edit"></div>
          </td>
          <td>
            <p class="cell-data"><%= task.deadline %></p>
            <div class="cell-edit"></div>
          </td>
          <td>
            <p class="cell-data"><%= task.requested_deadline %></p>
            <div class="cell-edit"><%= f.text_field(:requested_deadline) %></div>
          </td>
          <td>
            <p class="cell-data"><%= task.comment %></p>
            <div class="cell-edit"></div>
          </td>
          <td>
            <p class="cell-data"><%= task.excuse %></p>
            <div class="cell-edit"><%= f.text_field(:excuse) %></div>
          </td>
          <!-- add this if row is editable -->
          <td class="edit"><div class="edit"><div class="update-row">✎</div><div class="delete-row">✖</div></div>
          </td>
          <%end%>
        </tr>
        <%end%>
        
        
        <!-- "Create new data" form here -->
        <tr class="add-row">
           <%= form_for @task=Task.new, :url => {:action => 'create', :member_id => @member.id} do |f| %>
          <td><%= f.text_field(:description)%> </td>
          <td></td>
          <td><%= f.text_field(:deadline) %></td>
          <td></td>
          <td></td>
          <td></td>
          <%end%>
        </tr>
        
      </tbody>
    </table>
    
    <div class="spread-footer">
      <!-- tab, add this if table is editable -->
      <div class="tab edit-spreadsheet">Edit</div>
      <!-- keep buttons if edit is enabled -->
      <div class="btn green add">+</div>
      <div class="btn green save">Save</div>
      <div class="btn red cancel">Cancel</div>
    </div>
  </div>