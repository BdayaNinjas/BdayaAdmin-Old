<% @page_title = "resources List" %>

<div class="resources list">
  <h2>Resources</h2>
  <center><%= link_to("Members", {:controller => '/logistics/members', :action => 'index'}) %> <%= link_to("Materials", {:controller => '/logistics/materials', :action => 'index'}) %> <%= link_to("Requests", {:controller => '/logistics/requests', :action => 'index'}) %> <%= link_to("Resources", {:controller => '/logistics/resources', :action => 'index'}) %></center>

  <div><%= pluralize(@resources.size, 'resource') %></div>

  <div class="spreadsheet">

    <div class="spread-head">
      <!-- spreadsheet title -->
      <h1>Resources</h1>

      <!-- filter field -->
      <input value="filter..." />
    </div>

    <table>
      <thead>
        <tr>
          <th>Item</th>
          <th>Price</th>
          <th>Store</th>
          <th>Address</th>
          <th>Contact</th>
          <th>Number</th>
          <th>Comments</th>
        </tr>
      </thead>

      <tbody>
        <% @resources.each do |resource| %>
          <tr>
            <%= form_for [:logistics, resource], :method => 'PUT' do |f|%>
                <td>
                  <p class="cell-data">
                    <%= resource.item %>
                  </p>
                  <div class="cell-edit">
                    <%= f.text_field :item %>
                  </div>
                </td>

                <td>
                  <p class="cell-data">
                    <%= resource.price %>
                  </p>
                  <div class="cell-edit">
                    <%= f.text_field :price %>
                  </div>
                </td>

                <td>
                  <p class="cell-data">
                    <%= resource.store_name %>
                  </p>
                  <div class="cell-edit">
                    <%= f.text_field :store_name %>
                  </div>
                </td>

                <td>
                  <p class="cell-data">
                    <%= resource.store_address %>
                  </p>
                  <div class="cell-edit">
                    <%= f.text_field :store_address %>
                  </div>
                </td>

                <td>
                    <p class="cell-data">
                      <%= resource.contact_name %>
                    </p>
                    <div class="cell-edit">
                      <%= f.text_field :contact_name %>
                    </div>
                </td>

                <td>
                    <p class="cell-data">
                      <%= resource.contact_number %>
                    </p>
                    <div class="cell-edit">
                      <%= f.text_field :contact_number %>
                    </div>
                </td>

                <td>
                    <p class="cell-data">
                      <%= resource.comments %>
                    </p>
                    <div class="cell-edit">
                      <%= f.text_field :comments %>
                    </div>
                </td>

                <td class="edit">
                  <div class="edit">
                    <div class="update-row">✎</div>
                    <div class="delete-row"><%= link_to '✖', [:logistics,resource], method: :delete, data: { confirm: 'Are you sure?' } %></div>
                  </div>
                </td>
            <%end%>
          </tr>
        <%end%>
        
        <!-- "Create new data" form here -->
        <tr class="add-row">
          <% @resource = Resources.new %>
          <%= form_for [:logistics, @resource], :url => {:action => 'create'}, :method => 'POST' do |f| %>
            <td><%= f.text_field :item %></td>
            <td><%= f.text_field :price %></td>
            <td><%= f.text_field :store_name %></td>
            <td><%= f.text_field :store_address %></td>
            <td><%= f.text_field :contact_name %></td>
            <td><%= f.text_field :contact_number %></td>
            <td><%= f.text_field :comments %></td>
          <%end%>
        </tr>
      </tbody>
    </table>

    <div class="spread-footer">
      <div class="tab edit-spreadsheet">Edit</div>
      <div class="btn green add">+</div>
      <div class="btn green save">Save</div>
      <div class="btn red cancel">Cancel</div>
    </div>
    
  </div>
